
> mapwar@0.0.0 test
> vitest --run


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90mC:/Users/loolo/OneDrive/Documents/Project/MapWar[39m

 [32mΓ£ô[39m src/renderer/Viewport.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mΓ£ô[39m src/core/audio/SoundManager.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstdout[2m | src/core/BaseUpgrades.test.ts[2m > [22m[2mBase Upgrades[2m > [22m[2mUPGRADE_DEFENSE increases capture cost
[22m[39mCost Before: [33m48[39m
Cost After: [33m84[39m

 [32mΓ£ô[39m src/core/AIController.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mΓ£ô[39m src/core/AI_Wall.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mΓ£ô[39m src/core/GoldMine.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mΓ£ô[39m src/core/UnifiedMove.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstdout[2m | src/core/BaseUpgrades.test.ts[2m > [22m[2mBase Upgrades[2m > [22m[2mUPGRADE_INCOME increases next turn income
[22m[39mIncome Report Lv1: { total: [33m12[39m, base: [33m10[39m, land: [33m1[39m, landCount: [33m1[39m, depletedMines: [] }
Income Report Lv2: { total: [33m14[39m, base: [33m10[39m, land: [33m1[39m, landCount: [33m1[39m, depletedMines: [] }

 [32mΓ£ô[39m src/core/AI_Watchtower.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mΓ£ô[39m src/core/AuraSystem.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mΓ£ô[39m src/core/GameEngine_Town.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mΓ£ô[39m src/core/Watchtower.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstdout[2m | src/core/InteractionSystem.test.ts[2m > [22m[2mInteraction System[2m > [22m[2mprevents interaction if not enough gold
[22m[39m[PlanInteraction] Not enough gold. Gold: 0, Cost: 50

 [32mΓ£ô[39m src/core/Robustness.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mΓ£ô[39m src/renderer/CellInfoSystem.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [31mΓ¥»[39m src/core/WallMechanics.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 9[2mms[22m[39m
     [32mΓ£ô[39m can build a wall[32m 3[2mms[22m[39m
[31m     [31m├ù[31m wall increases capture cost[39m[32m 4[2mms[22m[39m
[31m     [31m├ù[31m can upgrade wall[39m[32m 1[2mms[22m[39m
     [32mΓ£ô[39m capture degrades wall[32m 1[2mms[22m[39m
     [32mΓ£ô[39m capture degrades wall level 2 to 1[32m 0[2mms[22m[39m
     [32mΓ£ô[39m disconnected wall provides no defense bonus[32m 0[2mms[22m[39m
 [32mΓ£ô[39m src/core/InteractionSystem.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mΓ£ô[39m src/core/BaseUpgrades.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mΓ£ô[39m src/core/AI_Strategy.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mΓ£ô[39m src/core/GameEngine.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mΓ£ô[39m src/core/AI.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstdout[2m | src/renderer/MainScene.test.ts[2m > [22m[2mMainScene[2m > [22m[2minitializes terrain visuals on creation
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Mobile Portrait (iPhone SE)' (375 x 667)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/MainScene.test.ts[2m > [22m[2mMainScene[2m > [22m[2mrefreshes terrain visuals on game restart
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Mobile Portrait (iPhone SE)' (375 x 667)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 375x667

[90mstdout[2m | src/renderer/MainScene.test.ts[2m > [22m[2mMainScene[2m > [22m[2mremoves overlay on restart
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Mobile Landscape' (667 x 375)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Mobile Landscape' (667 x 375)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 667x375
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/MainScene.test.ts[2m > [22m[2mMainScene[2m > [22m[2mupdates UI on restart
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/MainScene.test.ts[2m > [22m[2mMainScene[2m > [22m[2mcorrectly calculates grid coordinates when map is scaled and offset
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Tablet Portrait (iPad)' (768 x 1024)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Tablet Portrait (iPad)' (768 x 1024)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 768x1024

[90mstdout[2m | src/renderer/MainScene.test.ts[2m > [22m[2mMainScene[2m > [22m[2mrenders semi-transparent overlays for owned tiles and no overlay for neutral
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Tablet Landscape' (1024 x 768)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Tablet Landscape' (1024 x 768)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 1024x768
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/MainScene.test.ts[2m > [22m[2mMainScene[2m > [22m[2madds mute button to action system
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

 [32mΓ£ô[39m src/renderer/MainScene.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 193[2mms[22m[39m
[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Desktop HD' (1920 x 1080)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done
DEBUG: MainScene.resize 800x600
DEBUG: MainScene.resize Landscape Done

[90mstdout[2m | src/renderer/ui/LayoutValidation.test.ts[2m > [22m[2mUI Layout Validation[2m > [22m[2m'Desktop HD' (1920 x 1080)[2m > [22m[2mshould ensure no overlap and valid bounds
[22m[39mDEBUG: MainScene.resize 1920x1080
DEBUG: MainScene.resize Landscape Done

 [32mΓ£ô[39m src/renderer/ui/LayoutValidation.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 224[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m19 passed[39m[22m[90m (20)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m107 passed[39m[22m[90m (109)[39m
[2m   Start at [22m 14:33:41
[2m   Duration [22m 661ms[2m (transform 2.43s, setup 0ms, import 3.52s, tests 573ms, environment 2ms)[22m

