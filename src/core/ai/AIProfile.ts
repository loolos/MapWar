import { AIConfig } from '../AIConfig';

export type AIWeights = {
    SCORE_BASE_VALUE: number;
    SCORE_WIN_CONDITION: number;
    SCORE_TOWN: number;
    SCORE_ENEMY_LAND: number;
    SCORE_DISCONNECT_ENEMY: number;
    SCORE_DEFEND_BASE: number;
    SCORE_HILL: number;
    SCORE_BRIDGE: number;
    SCORE_EXPANSION: number;
    SCORE_AURA_MULTIPLIER: number;
    COST_PENALTY_MULTIPLIER: number;
    SCORE_LOOKAHEAD_TOWN: number;
    SCORE_LOOKAHEAD_BASE: number;
    STRATEGY_EARLY_TURN_LIMIT: number;
    STRATEGY_EARLY_EXPANSION_BONUS: number;
    STRATEGY_EARLY_FARM_BONUS: number;
    STRATEGY_BASE_UPGRADE_BONUS: number;
    STRATEGY_WALL_PRIORITY_BONUS: number;
    STRATEGY_ENDGAME_TURN: number;
    STRATEGY_ENDGAME_ATTACK_BONUS: number;
    SAVE_FOR_TARGET_MAX_TURNS: number;
    SAVE_FOR_TARGET_MIN_SCORE: number;
    ECONOMY_FARM_INCOME_TARGET_RATIO: number;
    ECONOMY_FARM_BALANCE_BONUS: number;
    ECONOMY_BASE_BALANCE_BONUS: number;
    ECONOMY_BASE_INCOME: number;
    ECONOMY_BASE_INCOME_LEVEL: number;
    ECONOMY_FARM_BUILD: number;
    ECONOMY_FARM_UPGRADE: number;
    ECONOMY_FARM_LEVEL: number;
    ECONOMY_AURA_BONUS_MULT: number;
    DEFENSE_BASE_UPGRADE: number;
    DEFENSE_WALL_BUILD: number;
    DEFENSE_WALL_UPGRADE: number;
    DEFENSE_WATCHTOWER_BUILD: number;
    DEFENSE_WATCHTOWER_UPGRADE: number;
    DEFENSE_THREAT_MULT: number;
    DEFENSE_BASE_THREAT_RADIUS: number;
    DEFENSE_BASE_THREAT_SCORE: number;
    RECONNECT_DISCONNECTED_SCORE: number;
    RECONNECT_MULTI_BONUS: number;
    RISK_ENEMY_ADJACENT_PENALTY: number;
    MAX_MOVES_PER_TURN: number;
    RANDOM_NOISE: number;
};

export type AIProfile = {
    id: string;
    label?: string;
    weights?: Partial<AIWeights>;
};

export const DefaultAIWeights: AIWeights = {
    SCORE_BASE_VALUE: AIConfig.SCORE_BASE_VALUE,
    SCORE_WIN_CONDITION: AIConfig.SCORE_WIN_CONDITION,
    SCORE_TOWN: AIConfig.SCORE_TOWN,
    SCORE_ENEMY_LAND: AIConfig.SCORE_ENEMY_LAND,
    SCORE_DISCONNECT_ENEMY: AIConfig.SCORE_DISCONNECT_ENEMY,
    SCORE_DEFEND_BASE: AIConfig.SCORE_DEFEND_BASE,
    SCORE_HILL: AIConfig.SCORE_HILL,
    SCORE_BRIDGE: AIConfig.SCORE_BRIDGE,
    SCORE_EXPANSION: AIConfig.SCORE_EXPANSION,
    SCORE_AURA_MULTIPLIER: AIConfig.SCORE_AURA_MULTIPLIER,
    COST_PENALTY_MULTIPLIER: AIConfig.COST_PENALTY_MULTIPLIER,
    SCORE_LOOKAHEAD_TOWN: AIConfig.SCORE_LOOKAHEAD_TOWN,
    SCORE_LOOKAHEAD_BASE: AIConfig.SCORE_LOOKAHEAD_BASE,
    STRATEGY_EARLY_TURN_LIMIT: AIConfig.STRATEGY_EARLY_TURN_LIMIT,
    STRATEGY_EARLY_EXPANSION_BONUS: AIConfig.STRATEGY_EARLY_EXPANSION_BONUS,
    STRATEGY_EARLY_FARM_BONUS: AIConfig.STRATEGY_EARLY_FARM_BONUS,
    STRATEGY_BASE_UPGRADE_BONUS: AIConfig.STRATEGY_BASE_UPGRADE_BONUS,
    STRATEGY_WALL_PRIORITY_BONUS: AIConfig.STRATEGY_WALL_PRIORITY_BONUS,
    STRATEGY_ENDGAME_TURN: AIConfig.STRATEGY_ENDGAME_TURN,
    STRATEGY_ENDGAME_ATTACK_BONUS: AIConfig.STRATEGY_ENDGAME_ATTACK_BONUS,
    SAVE_FOR_TARGET_MAX_TURNS: AIConfig.SAVE_FOR_TARGET_MAX_TURNS,
    SAVE_FOR_TARGET_MIN_SCORE: AIConfig.SAVE_FOR_TARGET_MIN_SCORE,
    ECONOMY_FARM_INCOME_TARGET_RATIO: AIConfig.ECONOMY_FARM_INCOME_TARGET_RATIO,
    ECONOMY_FARM_BALANCE_BONUS: AIConfig.ECONOMY_FARM_BALANCE_BONUS,
    ECONOMY_BASE_BALANCE_BONUS: AIConfig.ECONOMY_BASE_BALANCE_BONUS,
    ECONOMY_BASE_INCOME: AIConfig.ECONOMY_BASE_INCOME,
    ECONOMY_BASE_INCOME_LEVEL: AIConfig.ECONOMY_BASE_INCOME_LEVEL,
    ECONOMY_FARM_BUILD: AIConfig.ECONOMY_FARM_BUILD,
    ECONOMY_FARM_UPGRADE: AIConfig.ECONOMY_FARM_UPGRADE,
    ECONOMY_FARM_LEVEL: AIConfig.ECONOMY_FARM_LEVEL,
    ECONOMY_AURA_BONUS_MULT: AIConfig.ECONOMY_AURA_BONUS_MULT,
    DEFENSE_BASE_UPGRADE: AIConfig.DEFENSE_BASE_UPGRADE,
    DEFENSE_WALL_BUILD: AIConfig.DEFENSE_WALL_BUILD,
    DEFENSE_WALL_UPGRADE: AIConfig.DEFENSE_WALL_UPGRADE,
    DEFENSE_WATCHTOWER_BUILD: AIConfig.DEFENSE_WATCHTOWER_BUILD,
    DEFENSE_WATCHTOWER_UPGRADE: AIConfig.DEFENSE_WATCHTOWER_UPGRADE,
    DEFENSE_THREAT_MULT: AIConfig.DEFENSE_THREAT_MULT,
    DEFENSE_BASE_THREAT_RADIUS: AIConfig.DEFENSE_BASE_THREAT_RADIUS,
    DEFENSE_BASE_THREAT_SCORE: AIConfig.DEFENSE_BASE_THREAT_SCORE,
    RECONNECT_DISCONNECTED_SCORE: AIConfig.RECONNECT_DISCONNECTED_SCORE,
    RECONNECT_MULTI_BONUS: AIConfig.RECONNECT_MULTI_BONUS,
    RISK_ENEMY_ADJACENT_PENALTY: AIConfig.RISK_ENEMY_ADJACENT_PENALTY,
    MAX_MOVES_PER_TURN: AIConfig.MAX_MOVES_PER_TURN,
    RANDOM_NOISE: AIConfig.RANDOM_NOISE
};

export const EvolvedProfile1: AIProfile = {
    id: 'evolved_1768878655851_1',
    label: 'Explorer',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.341,
        DEFENSE_BASE_THREAT_RADIUS: 1.999,
        DEFENSE_BASE_THREAT_SCORE: 180.746,
        DEFENSE_BASE_UPGRADE: 34.398,
        DEFENSE_THREAT_MULT: 48.518,
        DEFENSE_WALL_BUILD: 93.106,
        DEFENSE_WALL_UPGRADE: 303.95,
        DEFENSE_WATCHTOWER_BUILD: 17.699,
        DEFENSE_WATCHTOWER_UPGRADE: 67.652,
        ECONOMY_AURA_BONUS_MULT: 99.605,
        ECONOMY_BASE_BALANCE_BONUS: 19.246,
        ECONOMY_BASE_INCOME: 218.356,
        ECONOMY_BASE_INCOME_LEVEL: 25.888,
        ECONOMY_FARM_BALANCE_BONUS: 22.526,
        ECONOMY_FARM_BUILD: 115.335,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.063,
        ECONOMY_FARM_LEVEL: 49.886,
        ECONOMY_FARM_UPGRADE: 254.107,
        MAX_MOVES_PER_TURN: 30.142,
        RANDOM_NOISE: 23.627,
        RECONNECT_DISCONNECTED_SCORE: 46.337,
        RECONNECT_MULTI_BONUS: 26.011,
        RISK_ENEMY_ADJACENT_PENALTY: 128.298,
        SAVE_FOR_TARGET_MAX_TURNS: 3.181,
        SAVE_FOR_TARGET_MIN_SCORE: 317.326,
        SCORE_AURA_MULTIPLIER: 279.462,
        SCORE_BASE_VALUE: 10.761,
        SCORE_BRIDGE: 24.022,
        SCORE_DEFEND_BASE: 898.4,
        SCORE_DISCONNECT_ENEMY: 46.096,
        SCORE_ENEMY_LAND: 40.586,
        SCORE_EXPANSION: 12.239,
        SCORE_HILL: 40.333,
        SCORE_LOOKAHEAD_BASE: 300.229,
        SCORE_LOOKAHEAD_TOWN: 70.088,
        SCORE_TOWN: 158.191,
        SCORE_WIN_CONDITION: 5486.917,
        STRATEGY_BASE_UPGRADE_BONUS: 22.474,
        STRATEGY_EARLY_EXPANSION_BONUS: 8.446,
        STRATEGY_EARLY_FARM_BONUS: 37.099,
        STRATEGY_EARLY_TURN_LIMIT: 4.759,
        STRATEGY_ENDGAME_ATTACK_BONUS: 68.309,
        STRATEGY_ENDGAME_TURN: 8.935,
        STRATEGY_WALL_PRIORITY_BONUS: 58.288,
    }
};

export const EvolvedProfile2: AIProfile = {
    id: 'evolved_1768878655851_2',
    label: 'Adventurer',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.208,
        DEFENSE_BASE_THREAT_RADIUS: 2.222,
        DEFENSE_BASE_THREAT_SCORE: 186.897,
        DEFENSE_BASE_UPGRADE: 37.043,
        DEFENSE_THREAT_MULT: 44.173,
        DEFENSE_WALL_BUILD: 108.605,
        DEFENSE_WALL_UPGRADE: 289.862,
        DEFENSE_WATCHTOWER_BUILD: 17.425,
        DEFENSE_WATCHTOWER_UPGRADE: 67.636,
        ECONOMY_AURA_BONUS_MULT: 105.442,
        ECONOMY_BASE_BALANCE_BONUS: 19.74,
        ECONOMY_BASE_INCOME: 188.467,
        ECONOMY_BASE_INCOME_LEVEL: 24.958,
        ECONOMY_FARM_BALANCE_BONUS: 21.726,
        ECONOMY_FARM_BUILD: 116.259,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.067,
        ECONOMY_FARM_LEVEL: 54.923,
        ECONOMY_FARM_UPGRADE: 265.337,
        MAX_MOVES_PER_TURN: 31.33,
        RANDOM_NOISE: 21.591,
        RECONNECT_DISCONNECTED_SCORE: 44.262,
        RECONNECT_MULTI_BONUS: 25.893,
        RISK_ENEMY_ADJACENT_PENALTY: 144.965,
        SAVE_FOR_TARGET_MAX_TURNS: 3.141,
        SAVE_FOR_TARGET_MIN_SCORE: 315.972,
        SCORE_AURA_MULTIPLIER: 295.907,
        SCORE_BASE_VALUE: 11.408,
        SCORE_BRIDGE: 25.81,
        SCORE_DEFEND_BASE: 935.211,
        SCORE_DISCONNECT_ENEMY: 46.428,
        SCORE_ENEMY_LAND: 37.022,
        SCORE_EXPANSION: 12.111,
        SCORE_HILL: 38.27,
        SCORE_LOOKAHEAD_BASE: 277.047,
        SCORE_LOOKAHEAD_TOWN: 60.328,
        SCORE_TOWN: 163.516,
        SCORE_WIN_CONDITION: 5141.681,
        STRATEGY_BASE_UPGRADE_BONUS: 26.415,
        STRATEGY_EARLY_EXPANSION_BONUS: 9.652,
        STRATEGY_EARLY_FARM_BONUS: 34.975,
        STRATEGY_EARLY_TURN_LIMIT: 4.127,
        STRATEGY_ENDGAME_ATTACK_BONUS: 64.524,
        STRATEGY_ENDGAME_TURN: 7.837,
        STRATEGY_WALL_PRIORITY_BONUS: 59.339,
    }
};

export const EvolvedProfile3: AIProfile = {
    id: 'evolved_1768878655851_3',
    label: 'Racer',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.204,
        DEFENSE_BASE_THREAT_RADIUS: 2.2,
        DEFENSE_BASE_THREAT_SCORE: 182.34,
        DEFENSE_BASE_UPGRADE: 36.957,
        DEFENSE_THREAT_MULT: 45.462,
        DEFENSE_WALL_BUILD: 108.675,
        DEFENSE_WALL_UPGRADE: 282.958,
        DEFENSE_WATCHTOWER_BUILD: 16.847,
        DEFENSE_WATCHTOWER_UPGRADE: 66.347,
        ECONOMY_AURA_BONUS_MULT: 106.824,
        ECONOMY_BASE_BALANCE_BONUS: 18.961,
        ECONOMY_BASE_INCOME: 191.36,
        ECONOMY_BASE_INCOME_LEVEL: 24.999,
        ECONOMY_FARM_BALANCE_BONUS: 21.421,
        ECONOMY_FARM_BUILD: 116.718,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.019,
        ECONOMY_FARM_LEVEL: 52.382,
        ECONOMY_FARM_UPGRADE: 265.987,
        MAX_MOVES_PER_TURN: 31.465,
        RANDOM_NOISE: 21.389,
        RECONNECT_DISCONNECTED_SCORE: 45.485,
        RECONNECT_MULTI_BONUS: 25.268,
        RISK_ENEMY_ADJACENT_PENALTY: 143.57,
        SAVE_FOR_TARGET_MAX_TURNS: 3.14,
        SAVE_FOR_TARGET_MIN_SCORE: 319.963,
        SCORE_AURA_MULTIPLIER: 300.819,
        SCORE_BASE_VALUE: 11.134,
        SCORE_BRIDGE: 24.87,
        SCORE_DEFEND_BASE: 951.313,
        SCORE_DISCONNECT_ENEMY: 47.179,
        SCORE_ENEMY_LAND: 37.182,
        SCORE_EXPANSION: 11.939,
        SCORE_HILL: 37.935,
        SCORE_LOOKAHEAD_BASE: 284.377,
        SCORE_LOOKAHEAD_TOWN: 61.46,
        SCORE_TOWN: 161.612,
        SCORE_WIN_CONDITION: 5129.718,
        STRATEGY_BASE_UPGRADE_BONUS: 25.951,
        STRATEGY_EARLY_EXPANSION_BONUS: 9.565,
        STRATEGY_EARLY_FARM_BONUS: 34.197,
        STRATEGY_EARLY_TURN_LIMIT: 4.274,
        STRATEGY_ENDGAME_ATTACK_BONUS: 67.768,
        STRATEGY_ENDGAME_TURN: 8.149,
        STRATEGY_WALL_PRIORITY_BONUS: 58.275,
    }
};

export const EvolvedProfile4: AIProfile = {
    id: 'evolved_1768878655851_4',
    label: 'Finder',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.242,
        DEFENSE_BASE_THREAT_RADIUS: 2.197,
        DEFENSE_BASE_THREAT_SCORE: 189.673,
        DEFENSE_BASE_UPGRADE: 37.465,
        DEFENSE_THREAT_MULT: 45.877,
        DEFENSE_WALL_BUILD: 104.433,
        DEFENSE_WALL_UPGRADE: 297.589,
        DEFENSE_WATCHTOWER_BUILD: 17.213,
        DEFENSE_WATCHTOWER_UPGRADE: 66.144,
        ECONOMY_AURA_BONUS_MULT: 106.869,
        ECONOMY_BASE_BALANCE_BONUS: 19.244,
        ECONOMY_BASE_INCOME: 194.402,
        ECONOMY_BASE_INCOME_LEVEL: 24.629,
        ECONOMY_FARM_BALANCE_BONUS: 22.221,
        ECONOMY_FARM_BUILD: 117.026,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.043,
        ECONOMY_FARM_LEVEL: 52.512,
        ECONOMY_FARM_UPGRADE: 266.741,
        MAX_MOVES_PER_TURN: 31.933,
        RANDOM_NOISE: 20.867,
        RECONNECT_DISCONNECTED_SCORE: 44.634,
        RECONNECT_MULTI_BONUS: 24.566,
        RISK_ENEMY_ADJACENT_PENALTY: 141.222,
        SAVE_FOR_TARGET_MAX_TURNS: 3.288,
        SAVE_FOR_TARGET_MIN_SCORE: 311.277,
        SCORE_AURA_MULTIPLIER: 291.298,
        SCORE_BASE_VALUE: 11.285,
        SCORE_BRIDGE: 25.226,
        SCORE_DEFEND_BASE: 925.046,
        SCORE_DISCONNECT_ENEMY: 47.763,
        SCORE_ENEMY_LAND: 37.175,
        SCORE_EXPANSION: 12.385,
        SCORE_HILL: 36.976,
        SCORE_LOOKAHEAD_BASE: 284.382,
        SCORE_LOOKAHEAD_TOWN: 61.936,
        SCORE_TOWN: 159.618,
        SCORE_WIN_CONDITION: 5388.003,
        STRATEGY_BASE_UPGRADE_BONUS: 25.942,
        STRATEGY_EARLY_EXPANSION_BONUS: 9.539,
        STRATEGY_EARLY_FARM_BONUS: 34.514,
        STRATEGY_EARLY_TURN_LIMIT: 4.281,
        STRATEGY_ENDGAME_ATTACK_BONUS: 64.158,
        STRATEGY_ENDGAME_TURN: 7.852,
        STRATEGY_WALL_PRIORITY_BONUS: 59.147,
    }
};

export const RandomAiProfiles: AIProfile[] = [
    EvolvedProfile1,
    EvolvedProfile2,
    EvolvedProfile3,
    EvolvedProfile4
];

export const DefaultAIProfile: AIProfile = EvolvedProfile1;

export const mergeAIWeights = (overrides?: Partial<AIWeights>): AIWeights => {
    return {
        ...DefaultAIWeights,
        ...(overrides || {})
    };
};
