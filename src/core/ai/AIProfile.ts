import { AIConfig } from '../AIConfig';

export type AIWeights = {
    SCORE_BASE_VALUE: number;
    SCORE_WIN_CONDITION: number;
    SCORE_TOWN: number;
    SCORE_ENEMY_LAND: number;
    SCORE_DISCONNECT_ENEMY: number;
    SCORE_DEFEND_BASE: number;
    SCORE_HILL: number;
    SCORE_BRIDGE: number;
    SCORE_EXPANSION: number;
    SCORE_AURA_MULTIPLIER: number;
    COST_PENALTY_MULTIPLIER: number;
    SCORE_LOOKAHEAD_TOWN: number;
    SCORE_LOOKAHEAD_BASE: number;
    STRATEGY_EARLY_TURN_LIMIT: number;
    STRATEGY_EARLY_EXPANSION_BONUS: number;
    STRATEGY_EARLY_FARM_BONUS: number;
    STRATEGY_BASE_UPGRADE_BONUS: number;
    STRATEGY_WALL_PRIORITY_BONUS: number;
    STRATEGY_ENDGAME_TURN: number;
    STRATEGY_ENDGAME_ATTACK_BONUS: number;
    SAVE_FOR_TARGET_MAX_TURNS: number;
    SAVE_FOR_TARGET_MIN_SCORE: number;
    ECONOMY_FARM_INCOME_TARGET_RATIO: number;
    ECONOMY_FARM_BALANCE_BONUS: number;
    ECONOMY_BASE_BALANCE_BONUS: number;
    ECONOMY_BASE_INCOME: number;
    ECONOMY_BASE_INCOME_LEVEL: number;
    ECONOMY_FARM_BUILD: number;
    ECONOMY_FARM_UPGRADE: number;
    ECONOMY_FARM_LEVEL: number;
    ECONOMY_AURA_BONUS_MULT: number;
    DEFENSE_BASE_UPGRADE: number;
    DEFENSE_WALL_BUILD: number;
    DEFENSE_WALL_UPGRADE: number;
    DEFENSE_WATCHTOWER_BUILD: number;
    DEFENSE_WATCHTOWER_UPGRADE: number;
    DEFENSE_THREAT_MULT: number;
    DEFENSE_BASE_THREAT_RADIUS: number;
    DEFENSE_BASE_THREAT_SCORE: number;
    RECONNECT_DISCONNECTED_SCORE: number;
    RECONNECT_MULTI_BONUS: number;
    RISK_ENEMY_ADJACENT_PENALTY: number;
    MAX_MOVES_PER_TURN: number;
    RANDOM_NOISE: number;
};

export type AIProfile = {
    id: string;
    label?: string;
    weights?: Partial<AIWeights>;
};

export const DefaultAIWeights: AIWeights = {
    SCORE_BASE_VALUE: AIConfig.SCORE_BASE_VALUE,
    SCORE_WIN_CONDITION: AIConfig.SCORE_WIN_CONDITION,
    SCORE_TOWN: AIConfig.SCORE_TOWN,
    SCORE_ENEMY_LAND: AIConfig.SCORE_ENEMY_LAND,
    SCORE_DISCONNECT_ENEMY: AIConfig.SCORE_DISCONNECT_ENEMY,
    SCORE_DEFEND_BASE: AIConfig.SCORE_DEFEND_BASE,
    SCORE_HILL: AIConfig.SCORE_HILL,
    SCORE_BRIDGE: AIConfig.SCORE_BRIDGE,
    SCORE_EXPANSION: AIConfig.SCORE_EXPANSION,
    SCORE_AURA_MULTIPLIER: AIConfig.SCORE_AURA_MULTIPLIER,
    COST_PENALTY_MULTIPLIER: AIConfig.COST_PENALTY_MULTIPLIER,
    SCORE_LOOKAHEAD_TOWN: AIConfig.SCORE_LOOKAHEAD_TOWN,
    SCORE_LOOKAHEAD_BASE: AIConfig.SCORE_LOOKAHEAD_BASE,
    STRATEGY_EARLY_TURN_LIMIT: AIConfig.STRATEGY_EARLY_TURN_LIMIT,
    STRATEGY_EARLY_EXPANSION_BONUS: AIConfig.STRATEGY_EARLY_EXPANSION_BONUS,
    STRATEGY_EARLY_FARM_BONUS: AIConfig.STRATEGY_EARLY_FARM_BONUS,
    STRATEGY_BASE_UPGRADE_BONUS: AIConfig.STRATEGY_BASE_UPGRADE_BONUS,
    STRATEGY_WALL_PRIORITY_BONUS: AIConfig.STRATEGY_WALL_PRIORITY_BONUS,
    STRATEGY_ENDGAME_TURN: AIConfig.STRATEGY_ENDGAME_TURN,
    STRATEGY_ENDGAME_ATTACK_BONUS: AIConfig.STRATEGY_ENDGAME_ATTACK_BONUS,
    SAVE_FOR_TARGET_MAX_TURNS: AIConfig.SAVE_FOR_TARGET_MAX_TURNS,
    SAVE_FOR_TARGET_MIN_SCORE: AIConfig.SAVE_FOR_TARGET_MIN_SCORE,
    ECONOMY_FARM_INCOME_TARGET_RATIO: AIConfig.ECONOMY_FARM_INCOME_TARGET_RATIO,
    ECONOMY_FARM_BALANCE_BONUS: AIConfig.ECONOMY_FARM_BALANCE_BONUS,
    ECONOMY_BASE_BALANCE_BONUS: AIConfig.ECONOMY_BASE_BALANCE_BONUS,
    ECONOMY_BASE_INCOME: 120,
    ECONOMY_BASE_INCOME_LEVEL: 30,
    ECONOMY_FARM_BUILD: 90,
    ECONOMY_FARM_UPGRADE: 70,
    ECONOMY_FARM_LEVEL: 25,
    ECONOMY_AURA_BONUS_MULT: 200,
    DEFENSE_BASE_UPGRADE: 120,
    DEFENSE_WALL_BUILD: 110,
    DEFENSE_WALL_UPGRADE: 90,
    DEFENSE_WATCHTOWER_BUILD: 80,
    DEFENSE_WATCHTOWER_UPGRADE: 70,
    DEFENSE_THREAT_MULT: 120,
    DEFENSE_BASE_THREAT_RADIUS: 2,
    DEFENSE_BASE_THREAT_SCORE: 600,
    RECONNECT_DISCONNECTED_SCORE: 120,
    RECONNECT_MULTI_BONUS: AIConfig.RECONNECT_MULTI_BONUS,
    RISK_ENEMY_ADJACENT_PENALTY: AIConfig.RISK_ENEMY_ADJACENT_PENALTY,
    MAX_MOVES_PER_TURN: AIConfig.MAX_MOVES_PER_TURN,
    RANDOM_NOISE: 10
};

export const EvolvedProfile1: AIProfile = {
    id: 'evolved_1768856872436_1',
    label: 'Apex Economic Conqueror',
    weights: {
        COST_PENALTY_MULTIPLIER: 0.795,
        DEFENSE_BASE_THREAT_RADIUS: 3.69,
        DEFENSE_BASE_THREAT_SCORE: 288.408,
        DEFENSE_BASE_UPGRADE: 44.37,
        DEFENSE_THREAT_MULT: 63.156,
        DEFENSE_WALL_BUILD: 148.912,
        DEFENSE_WALL_UPGRADE: 278.431,
        DEFENSE_WATCHTOWER_BUILD: 35.506,
        DEFENSE_WATCHTOWER_UPGRADE: 83.165,
        ECONOMY_AURA_BONUS_MULT: 174.976,
        ECONOMY_BASE_BALANCE_BONUS: 28.293,
        ECONOMY_BASE_INCOME: 233.864,
        ECONOMY_BASE_INCOME_LEVEL: 17.097,
        ECONOMY_FARM_BALANCE_BONUS: 12.362,
        ECONOMY_FARM_BUILD: 139.377,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.11,
        ECONOMY_FARM_LEVEL: 50.243,
        ECONOMY_FARM_UPGRADE: 228.355,
        MAX_MOVES_PER_TURN: 43.763,
        RANDOM_NOISE: 10.984,
        RECONNECT_DISCONNECTED_SCORE: 47.617,
        RECONNECT_MULTI_BONUS: 34.57,
        RISK_ENEMY_ADJACENT_PENALTY: 89.59,
        SAVE_FOR_TARGET_MAX_TURNS: 3.03,
        SAVE_FOR_TARGET_MIN_SCORE: 464.559,
        SCORE_AURA_MULTIPLIER: 119.641,
        SCORE_BASE_VALUE: 7.804,
        SCORE_BRIDGE: 17.085,
        SCORE_DEFEND_BASE: 1915.085,
        SCORE_DISCONNECT_ENEMY: 40.965,
        SCORE_ENEMY_LAND: 106.441,
        SCORE_EXPANSION: 8.544,
        SCORE_HILL: 31.095,
        SCORE_LOOKAHEAD_BASE: 273.785,
        SCORE_LOOKAHEAD_TOWN: 80.233,
        SCORE_TOWN: 518.174,
        SCORE_WIN_CONDITION: 8277.701,
        STRATEGY_BASE_UPGRADE_BONUS: 33.958,
        STRATEGY_EARLY_EXPANSION_BONUS: 10.247,
        STRATEGY_EARLY_FARM_BONUS: 28.732,
        STRATEGY_EARLY_TURN_LIMIT: 3.397,
        STRATEGY_ENDGAME_ATTACK_BONUS: 63.914,
        STRATEGY_ENDGAME_TURN: 11.269,
        STRATEGY_WALL_PRIORITY_BONUS: 54.185,
    }
};

export const EvolvedProfile2: AIProfile = {
    id: 'evolved_1768856872436_2',
    label: 'Supreme Economic Builder',
    weights: {
        COST_PENALTY_MULTIPLIER: 0.788,
        DEFENSE_BASE_THREAT_RADIUS: 3.556,
        DEFENSE_BASE_THREAT_SCORE: 263.09,
        DEFENSE_BASE_UPGRADE: 46.232,
        DEFENSE_THREAT_MULT: 63.027,
        DEFENSE_WALL_BUILD: 160.304,
        DEFENSE_WALL_UPGRADE: 261.182,
        DEFENSE_WATCHTOWER_BUILD: 41.52,
        DEFENSE_WATCHTOWER_UPGRADE: 73.667,
        ECONOMY_AURA_BONUS_MULT: 168.144,
        ECONOMY_BASE_BALANCE_BONUS: 25.001,
        ECONOMY_BASE_INCOME: 266.799,
        ECONOMY_BASE_INCOME_LEVEL: 17.739,
        ECONOMY_FARM_BALANCE_BONUS: 12.723,
        ECONOMY_FARM_BUILD: 136.612,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.237,
        ECONOMY_FARM_LEVEL: 47.679,
        ECONOMY_FARM_UPGRADE: 209.664,
        MAX_MOVES_PER_TURN: 44.943,
        RANDOM_NOISE: 11.176,
        RECONNECT_DISCONNECTED_SCORE: 46.283,
        RECONNECT_MULTI_BONUS: 33.738,
        RISK_ENEMY_ADJACENT_PENALTY: 82.013,
        SAVE_FOR_TARGET_MAX_TURNS: 3.025,
        SAVE_FOR_TARGET_MIN_SCORE: 548.574,
        SCORE_AURA_MULTIPLIER: 105.471,
        SCORE_BASE_VALUE: 7.927,
        SCORE_BRIDGE: 15.52,
        SCORE_DEFEND_BASE: 1776.69,
        SCORE_DISCONNECT_ENEMY: 35.025,
        SCORE_ENEMY_LAND: 99.26,
        SCORE_EXPANSION: 7.932,
        SCORE_HILL: 29.157,
        SCORE_LOOKAHEAD_BASE: 309.034,
        SCORE_LOOKAHEAD_TOWN: 80.502,
        SCORE_TOWN: 480.765,
        SCORE_WIN_CONDITION: 9157.697,
        STRATEGY_BASE_UPGRADE_BONUS: 31.732,
        STRATEGY_EARLY_EXPANSION_BONUS: 12.113,
        STRATEGY_EARLY_FARM_BONUS: 26.997,
        STRATEGY_EARLY_TURN_LIMIT: 3.666,
        STRATEGY_ENDGAME_ATTACK_BONUS: 70.171,
        STRATEGY_ENDGAME_TURN: 11.832,
        STRATEGY_WALL_PRIORITY_BONUS: 50.382,
    }
};

export const EvolvedProfile3: AIProfile = {
    id: 'evolved_1768856872436_3',
    label: 'Grand Economic Guardian',
    weights: {
        COST_PENALTY_MULTIPLIER: 0.852,
        DEFENSE_BASE_THREAT_RADIUS: 3.804,
        DEFENSE_BASE_THREAT_SCORE: 254.834,
        DEFENSE_BASE_UPGRADE: 46.594,
        DEFENSE_THREAT_MULT: 61.085,
        DEFENSE_WALL_BUILD: 143.269,
        DEFENSE_WALL_UPGRADE: 244.594,
        DEFENSE_WATCHTOWER_BUILD: 41.628,
        DEFENSE_WATCHTOWER_UPGRADE: 72.214,
        ECONOMY_AURA_BONUS_MULT: 177.655,
        ECONOMY_BASE_BALANCE_BONUS: 29.52,
        ECONOMY_BASE_INCOME: 267.51,
        ECONOMY_BASE_INCOME_LEVEL: 15.286,
        ECONOMY_FARM_BALANCE_BONUS: 13.238,
        ECONOMY_FARM_BUILD: 148.582,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.236,
        ECONOMY_FARM_LEVEL: 44.733,
        ECONOMY_FARM_UPGRADE: 198.753,
        MAX_MOVES_PER_TURN: 43.372,
        RANDOM_NOISE: 11.301,
        RECONNECT_DISCONNECTED_SCORE: 47.807,
        RECONNECT_MULTI_BONUS: 33.111,
        RISK_ENEMY_ADJACENT_PENALTY: 86.393,
        SAVE_FOR_TARGET_MAX_TURNS: 3.032,
        SAVE_FOR_TARGET_MIN_SCORE: 457.093,
        SCORE_AURA_MULTIPLIER: 116.365,
        SCORE_BASE_VALUE: 8.089,
        SCORE_BRIDGE: 16.737,
        SCORE_DEFEND_BASE: 1988.552,
        SCORE_DISCONNECT_ENEMY: 40.26,
        SCORE_ENEMY_LAND: 107.283,
        SCORE_EXPANSION: 9.225,
        SCORE_HILL: 29.59,
        SCORE_LOOKAHEAD_BASE: 322.786,
        SCORE_LOOKAHEAD_TOWN: 79.881,
        SCORE_TOWN: 478.723,
        SCORE_WIN_CONDITION: 9042.906,
        STRATEGY_BASE_UPGRADE_BONUS: 33.653,
        STRATEGY_EARLY_EXPANSION_BONUS: 10.824,
        STRATEGY_EARLY_FARM_BONUS: 28.049,
        STRATEGY_EARLY_TURN_LIMIT: 3.59,
        STRATEGY_ENDGAME_ATTACK_BONUS: 63.702,
        STRATEGY_ENDGAME_TURN: 10.554,
        STRATEGY_WALL_PRIORITY_BONUS: 47.253,
    }
};

export const EvolvedProfile4: AIProfile = {
    id: 'evolved_1768856872436_4',
    label: 'Royal Economic Warden',
    weights: {
        COST_PENALTY_MULTIPLIER: 0.9,
        DEFENSE_BASE_THREAT_RADIUS: 4.147,
        DEFENSE_BASE_THREAT_SCORE: 266.625,
        DEFENSE_BASE_UPGRADE: 55.187,
        DEFENSE_THREAT_MULT: 64.01,
        DEFENSE_WALL_BUILD: 144.792,
        DEFENSE_WALL_UPGRADE: 233.615,
        DEFENSE_WATCHTOWER_BUILD: 38.334,
        DEFENSE_WATCHTOWER_UPGRADE: 65.679,
        ECONOMY_AURA_BONUS_MULT: 144.162,
        ECONOMY_BASE_BALANCE_BONUS: 29.245,
        ECONOMY_BASE_INCOME: 232.376,
        ECONOMY_BASE_INCOME_LEVEL: 16.534,
        ECONOMY_FARM_BALANCE_BONUS: 13.044,
        ECONOMY_FARM_BUILD: 161.915,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.129,
        ECONOMY_FARM_LEVEL: 52.628,
        ECONOMY_FARM_UPGRADE: 210.718,
        MAX_MOVES_PER_TURN: 44.674,
        RANDOM_NOISE: 10.659,
        RECONNECT_DISCONNECTED_SCORE: 42.963,
        RECONNECT_MULTI_BONUS: 35.647,
        RISK_ENEMY_ADJACENT_PENALTY: 80.878,
        SAVE_FOR_TARGET_MAX_TURNS: 3.533,
        SAVE_FOR_TARGET_MIN_SCORE: 474.9,
        SCORE_AURA_MULTIPLIER: 111.653,
        SCORE_BASE_VALUE: 7.388,
        SCORE_BRIDGE: 15.371,
        SCORE_DEFEND_BASE: 2004.265,
        SCORE_DISCONNECT_ENEMY: 38.431,
        SCORE_ENEMY_LAND: 102.222,
        SCORE_EXPANSION: 8.388,
        SCORE_HILL: 33.205,
        SCORE_LOOKAHEAD_BASE: 320.949,
        SCORE_LOOKAHEAD_TOWN: 73.705,
        SCORE_TOWN: 577.963,
        SCORE_WIN_CONDITION: 7732.853,
        STRATEGY_BASE_UPGRADE_BONUS: 30.825,
        STRATEGY_EARLY_EXPANSION_BONUS: 12.321,
        STRATEGY_EARLY_FARM_BONUS: 29.764,
        STRATEGY_EARLY_TURN_LIMIT: 3.266,
        STRATEGY_ENDGAME_ATTACK_BONUS: 72.182,
        STRATEGY_ENDGAME_TURN: 9.939,
        STRATEGY_WALL_PRIORITY_BONUS: 46.698,
    }
};

export const RandomAiProfiles: AIProfile[] = [
    EvolvedProfile1,
    EvolvedProfile2,
    EvolvedProfile3,
    EvolvedProfile4
];

export const DefaultAIProfile: AIProfile = EvolvedProfile1;

export const mergeAIWeights = (overrides?: Partial<AIWeights>): AIWeights => {
    return {
        ...DefaultAIWeights,
        ...(overrides || {})
    };
};
