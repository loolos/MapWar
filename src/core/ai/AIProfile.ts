import { AIConfig } from '../AIConfig';

export type AIWeights = {
    SCORE_BASE_VALUE: number;
    SCORE_WIN_CONDITION: number;
    SCORE_TOWN: number;
    SCORE_ENEMY_LAND: number;
    SCORE_DISCONNECT_ENEMY: number;
    SCORE_DEFEND_BASE: number;
    SCORE_HILL: number;
    SCORE_BRIDGE: number;
    SCORE_EXPANSION: number;
    SCORE_AURA_MULTIPLIER: number;
    COST_PENALTY_MULTIPLIER: number;
    SCORE_LOOKAHEAD_TOWN: number;
    SCORE_LOOKAHEAD_BASE: number;
    STRATEGY_EARLY_TURN_LIMIT: number;
    STRATEGY_EARLY_EXPANSION_BONUS: number;
    STRATEGY_EARLY_FARM_BONUS: number;
    STRATEGY_BASE_UPGRADE_BONUS: number;
    STRATEGY_WALL_PRIORITY_BONUS: number;
    STRATEGY_ENDGAME_TURN: number;
    STRATEGY_ENDGAME_ATTACK_BONUS: number;
    SAVE_FOR_TARGET_MAX_TURNS: number;
    SAVE_FOR_TARGET_MIN_SCORE: number;
    ECONOMY_FARM_INCOME_TARGET_RATIO: number;
    ECONOMY_FARM_BALANCE_BONUS: number;
    ECONOMY_BASE_BALANCE_BONUS: number;
    ECONOMY_BASE_INCOME: number;
    ECONOMY_BASE_INCOME_LEVEL: number;
    ECONOMY_FARM_BUILD: number;
    ECONOMY_FARM_UPGRADE: number;
    ECONOMY_FARM_LEVEL: number;
    ECONOMY_AURA_BONUS_MULT: number;
    DEFENSE_BASE_UPGRADE: number;
    DEFENSE_WALL_BUILD: number;
    DEFENSE_WALL_UPGRADE: number;
    DEFENSE_WATCHTOWER_BUILD: number;
    DEFENSE_WATCHTOWER_UPGRADE: number;
    DEFENSE_THREAT_MULT: number;
    DEFENSE_BASE_THREAT_RADIUS: number;
    DEFENSE_BASE_THREAT_SCORE: number;
    RECONNECT_DISCONNECTED_SCORE: number;
    RECONNECT_MULTI_BONUS: number;
    RISK_ENEMY_ADJACENT_PENALTY: number;
    MAX_MOVES_PER_TURN: number;
    RANDOM_NOISE: number;
};

export type AIProfile = {
    id: string;
    label?: string;
    weights?: Partial<AIWeights>;
};

export const DefaultAIWeights: AIWeights = {
    SCORE_BASE_VALUE: AIConfig.SCORE_BASE_VALUE,
    SCORE_WIN_CONDITION: AIConfig.SCORE_WIN_CONDITION,
    SCORE_TOWN: AIConfig.SCORE_TOWN,
    SCORE_ENEMY_LAND: AIConfig.SCORE_ENEMY_LAND,
    SCORE_DISCONNECT_ENEMY: AIConfig.SCORE_DISCONNECT_ENEMY,
    SCORE_DEFEND_BASE: AIConfig.SCORE_DEFEND_BASE,
    SCORE_HILL: AIConfig.SCORE_HILL,
    SCORE_BRIDGE: AIConfig.SCORE_BRIDGE,
    SCORE_EXPANSION: AIConfig.SCORE_EXPANSION,
    SCORE_AURA_MULTIPLIER: AIConfig.SCORE_AURA_MULTIPLIER,
    COST_PENALTY_MULTIPLIER: AIConfig.COST_PENALTY_MULTIPLIER,
    SCORE_LOOKAHEAD_TOWN: AIConfig.SCORE_LOOKAHEAD_TOWN,
    SCORE_LOOKAHEAD_BASE: AIConfig.SCORE_LOOKAHEAD_BASE,
    STRATEGY_EARLY_TURN_LIMIT: AIConfig.STRATEGY_EARLY_TURN_LIMIT,
    STRATEGY_EARLY_EXPANSION_BONUS: AIConfig.STRATEGY_EARLY_EXPANSION_BONUS,
    STRATEGY_EARLY_FARM_BONUS: AIConfig.STRATEGY_EARLY_FARM_BONUS,
    STRATEGY_BASE_UPGRADE_BONUS: AIConfig.STRATEGY_BASE_UPGRADE_BONUS,
    STRATEGY_WALL_PRIORITY_BONUS: AIConfig.STRATEGY_WALL_PRIORITY_BONUS,
    STRATEGY_ENDGAME_TURN: AIConfig.STRATEGY_ENDGAME_TURN,
    STRATEGY_ENDGAME_ATTACK_BONUS: AIConfig.STRATEGY_ENDGAME_ATTACK_BONUS,
    SAVE_FOR_TARGET_MAX_TURNS: AIConfig.SAVE_FOR_TARGET_MAX_TURNS,
    SAVE_FOR_TARGET_MIN_SCORE: AIConfig.SAVE_FOR_TARGET_MIN_SCORE,
    ECONOMY_FARM_INCOME_TARGET_RATIO: AIConfig.ECONOMY_FARM_INCOME_TARGET_RATIO,
    ECONOMY_FARM_BALANCE_BONUS: AIConfig.ECONOMY_FARM_BALANCE_BONUS,
    ECONOMY_BASE_BALANCE_BONUS: AIConfig.ECONOMY_BASE_BALANCE_BONUS,
    ECONOMY_BASE_INCOME: AIConfig.ECONOMY_BASE_INCOME,
    ECONOMY_BASE_INCOME_LEVEL: AIConfig.ECONOMY_BASE_INCOME_LEVEL,
    ECONOMY_FARM_BUILD: AIConfig.ECONOMY_FARM_BUILD,
    ECONOMY_FARM_UPGRADE: AIConfig.ECONOMY_FARM_UPGRADE,
    ECONOMY_FARM_LEVEL: AIConfig.ECONOMY_FARM_LEVEL,
    ECONOMY_AURA_BONUS_MULT: AIConfig.ECONOMY_AURA_BONUS_MULT,
    DEFENSE_BASE_UPGRADE: AIConfig.DEFENSE_BASE_UPGRADE,
    DEFENSE_WALL_BUILD: AIConfig.DEFENSE_WALL_BUILD,
    DEFENSE_WALL_UPGRADE: AIConfig.DEFENSE_WALL_UPGRADE,
    DEFENSE_WATCHTOWER_BUILD: AIConfig.DEFENSE_WATCHTOWER_BUILD,
    DEFENSE_WATCHTOWER_UPGRADE: AIConfig.DEFENSE_WATCHTOWER_UPGRADE,
    DEFENSE_THREAT_MULT: AIConfig.DEFENSE_THREAT_MULT,
    DEFENSE_BASE_THREAT_RADIUS: AIConfig.DEFENSE_BASE_THREAT_RADIUS,
    DEFENSE_BASE_THREAT_SCORE: AIConfig.DEFENSE_BASE_THREAT_SCORE,
    RECONNECT_DISCONNECTED_SCORE: AIConfig.RECONNECT_DISCONNECTED_SCORE,
    RECONNECT_MULTI_BONUS: AIConfig.RECONNECT_MULTI_BONUS,
    RISK_ENEMY_ADJACENT_PENALTY: AIConfig.RISK_ENEMY_ADJACENT_PENALTY,
    MAX_MOVES_PER_TURN: AIConfig.MAX_MOVES_PER_TURN,
    RANDOM_NOISE: AIConfig.RANDOM_NOISE
};

export const EvolvedProfile1: AIProfile = {
    id: 'evolved_1768864428629_1',
    label: 'Explorer Aura',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.538,
        DEFENSE_BASE_THREAT_RADIUS: 2.366,
        DEFENSE_BASE_THREAT_SCORE: 167.657,
        DEFENSE_BASE_UPGRADE: 41.376,
        DEFENSE_THREAT_MULT: 41.271,
        DEFENSE_WALL_BUILD: 137.36,
        DEFENSE_WALL_UPGRADE: 351.329,
        DEFENSE_WATCHTOWER_BUILD: 18.773,
        DEFENSE_WATCHTOWER_UPGRADE: 68.852,
        ECONOMY_AURA_BONUS_MULT: 109.759,
        ECONOMY_BASE_BALANCE_BONUS: 20.909,
        ECONOMY_BASE_INCOME: 210.104,
        ECONOMY_BASE_INCOME_LEVEL: 15.704,
        ECONOMY_FARM_BALANCE_BONUS: 19.066,
        ECONOMY_FARM_BUILD: 137.551,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.416,
        ECONOMY_FARM_LEVEL: 60.707,
        ECONOMY_FARM_UPGRADE: 204.736,
        MAX_MOVES_PER_TURN: 36.924,
        RANDOM_NOISE: 18.133,
        RECONNECT_DISCONNECTED_SCORE: 43.451,
        RECONNECT_MULTI_BONUS: 31.323,
        RISK_ENEMY_ADJACENT_PENALTY: 78.922,
        SAVE_FOR_TARGET_MAX_TURNS: 3.444,
        SAVE_FOR_TARGET_MIN_SCORE: 433.56,
        SCORE_AURA_MULTIPLIER: 191.424,
        SCORE_BASE_VALUE: 7.217,
        SCORE_BRIDGE: 25.278,
        SCORE_DEFEND_BASE: 1272.434,
        SCORE_DISCONNECT_ENEMY: 54.563,
        SCORE_ENEMY_LAND: 45.975,
        SCORE_EXPANSION: 8.996,
        SCORE_HILL: 43.714,
        SCORE_LOOKAHEAD_BASE: 356.826,
        SCORE_LOOKAHEAD_TOWN: 63.376,
        SCORE_TOWN: 279.117,
        SCORE_WIN_CONDITION: 4454.144,
        STRATEGY_BASE_UPGRADE_BONUS: 27.809,
        STRATEGY_EARLY_EXPANSION_BONUS: 10.241,
        STRATEGY_EARLY_FARM_BONUS: 38.866,
        STRATEGY_EARLY_TURN_LIMIT: 3.883,
        STRATEGY_ENDGAME_ATTACK_BONUS: 91.091,
        STRATEGY_ENDGAME_TURN: 9.225,
        STRATEGY_WALL_PRIORITY_BONUS: 54.417,
    }
};

export const EvolvedProfile2: AIProfile = {
    id: 'evolved_1768864428629_2',
    label: 'Explorer Aura',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.4,
        DEFENSE_BASE_THREAT_RADIUS: 2.813,
        DEFENSE_BASE_THREAT_SCORE: 169.41,
        DEFENSE_BASE_UPGRADE: 39.915,
        DEFENSE_THREAT_MULT: 42.817,
        DEFENSE_WALL_BUILD: 137.236,
        DEFENSE_WALL_UPGRADE: 308.585,
        DEFENSE_WATCHTOWER_BUILD: 23.071,
        DEFENSE_WATCHTOWER_UPGRADE: 68.402,
        ECONOMY_AURA_BONUS_MULT: 117.256,
        ECONOMY_BASE_BALANCE_BONUS: 24.381,
        ECONOMY_BASE_INCOME: 217.717,
        ECONOMY_BASE_INCOME_LEVEL: 18.347,
        ECONOMY_FARM_BALANCE_BONUS: 17.287,
        ECONOMY_FARM_BUILD: 115.047,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.155,
        ECONOMY_FARM_LEVEL: 63.672,
        ECONOMY_FARM_UPGRADE: 211.69,
        MAX_MOVES_PER_TURN: 33.567,
        RANDOM_NOISE: 16.665,
        RECONNECT_DISCONNECTED_SCORE: 43.89,
        RECONNECT_MULTI_BONUS: 30.991,
        RISK_ENEMY_ADJACENT_PENALTY: 76.697,
        SAVE_FOR_TARGET_MAX_TURNS: 2.869,
        SAVE_FOR_TARGET_MIN_SCORE: 337.336,
        SCORE_AURA_MULTIPLIER: 194.628,
        SCORE_BASE_VALUE: 7.15,
        SCORE_BRIDGE: 25.239,
        SCORE_DEFEND_BASE: 1338.417,
        SCORE_DISCONNECT_ENEMY: 43.197,
        SCORE_ENEMY_LAND: 50.81,
        SCORE_EXPANSION: 10.383,
        SCORE_HILL: 56.666,
        SCORE_LOOKAHEAD_BASE: 347.377,
        SCORE_LOOKAHEAD_TOWN: 59.598,
        SCORE_TOWN: 280.04,
        SCORE_WIN_CONDITION: 4632.94,
        STRATEGY_BASE_UPGRADE_BONUS: 26.58,
        STRATEGY_EARLY_EXPANSION_BONUS: 11.473,
        STRATEGY_EARLY_FARM_BONUS: 39.072,
        STRATEGY_EARLY_TURN_LIMIT: 3.341,
        STRATEGY_ENDGAME_ATTACK_BONUS: 94.924,
        STRATEGY_ENDGAME_TURN: 9.479,
        STRATEGY_WALL_PRIORITY_BONUS: 52.233,
    }
};

export const EvolvedProfile3: AIProfile = {
    id: 'evolved_1768864428629_3',
    label: 'Explorer Aura',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.403,
        DEFENSE_BASE_THREAT_RADIUS: 2.382,
        DEFENSE_BASE_THREAT_SCORE: 201.689,
        DEFENSE_BASE_UPGRADE: 38.181,
        DEFENSE_THREAT_MULT: 41.28,
        DEFENSE_WALL_BUILD: 135.798,
        DEFENSE_WALL_UPGRADE: 324.352,
        DEFENSE_WATCHTOWER_BUILD: 23.379,
        DEFENSE_WATCHTOWER_UPGRADE: 65.5,
        ECONOMY_AURA_BONUS_MULT: 97.412,
        ECONOMY_BASE_BALANCE_BONUS: 24.982,
        ECONOMY_BASE_INCOME: 240.109,
        ECONOMY_BASE_INCOME_LEVEL: 17.426,
        ECONOMY_FARM_BALANCE_BONUS: 16.166,
        ECONOMY_FARM_BUILD: 110.745,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 1.185,
        ECONOMY_FARM_LEVEL: 55.826,
        ECONOMY_FARM_UPGRADE: 210.587,
        MAX_MOVES_PER_TURN: 31.851,
        RANDOM_NOISE: 16.666,
        RECONNECT_DISCONNECTED_SCORE: 48.427,
        RECONNECT_MULTI_BONUS: 35.216,
        RISK_ENEMY_ADJACENT_PENALTY: 70.646,
        SAVE_FOR_TARGET_MAX_TURNS: 3.086,
        SAVE_FOR_TARGET_MIN_SCORE: 338.951,
        SCORE_AURA_MULTIPLIER: 211.519,
        SCORE_BASE_VALUE: 7.616,
        SCORE_BRIDGE: 24.966,
        SCORE_DEFEND_BASE: 1275.652,
        SCORE_DISCONNECT_ENEMY: 51.745,
        SCORE_ENEMY_LAND: 47.463,
        SCORE_EXPANSION: 10.608,
        SCORE_HILL: 55.072,
        SCORE_LOOKAHEAD_BASE: 344.774,
        SCORE_LOOKAHEAD_TOWN: 64.164,
        SCORE_TOWN: 296.639,
        SCORE_WIN_CONDITION: 4722.303,
        STRATEGY_BASE_UPGRADE_BONUS: 26.522,
        STRATEGY_EARLY_EXPANSION_BONUS: 10.226,
        STRATEGY_EARLY_FARM_BONUS: 38.587,
        STRATEGY_EARLY_TURN_LIMIT: 3.861,
        STRATEGY_ENDGAME_ATTACK_BONUS: 90.914,
        STRATEGY_ENDGAME_TURN: 9.314,
        STRATEGY_WALL_PRIORITY_BONUS: 57.029,
    }
};

export const EvolvedProfile4: AIProfile = {
    id: 'evolved_1768864428629_4',
    label: 'Smart Raider',
    weights: {
        COST_PENALTY_MULTIPLIER: 1.29,
        DEFENSE_BASE_THREAT_RADIUS: 2.909,
        DEFENSE_BASE_THREAT_SCORE: 260.533,
        DEFENSE_BASE_UPGRADE: 48.989,
        DEFENSE_THREAT_MULT: 64.304,
        DEFENSE_WALL_BUILD: 89.765,
        DEFENSE_WALL_UPGRADE: 275.141,
        DEFENSE_WATCHTOWER_BUILD: 34.464,
        DEFENSE_WATCHTOWER_UPGRADE: 77.488,
        ECONOMY_AURA_BONUS_MULT: 225.549,
        ECONOMY_BASE_BALANCE_BONUS: 22.322,
        ECONOMY_BASE_INCOME: 280.733,
        ECONOMY_BASE_INCOME_LEVEL: 18.972,
        ECONOMY_FARM_BALANCE_BONUS: 10.866,
        ECONOMY_FARM_BUILD: 138.182,
        ECONOMY_FARM_INCOME_TARGET_RATIO: 0.967,
        ECONOMY_FARM_LEVEL: 49.149,
        ECONOMY_FARM_UPGRADE: 216.736,
        MAX_MOVES_PER_TURN: 25.289,
        RANDOM_NOISE: 9.072,
        RECONNECT_DISCONNECTED_SCORE: 31.887,
        RECONNECT_MULTI_BONUS: 38.836,
        RISK_ENEMY_ADJACENT_PENALTY: 127.795,
        SAVE_FOR_TARGET_MAX_TURNS: 4.386,
        SAVE_FOR_TARGET_MIN_SCORE: 481.401,
        SCORE_AURA_MULTIPLIER: 68.666,
        SCORE_BASE_VALUE: 12.628,
        SCORE_BRIDGE: 11.027,
        SCORE_DEFEND_BASE: 1332.216,
        SCORE_DISCONNECT_ENEMY: 29.309,
        SCORE_ENEMY_LAND: 117.518,
        SCORE_EXPANSION: 7.823,
        SCORE_HILL: 37.923,
        SCORE_LOOKAHEAD_BASE: 208.938,
        SCORE_LOOKAHEAD_TOWN: 92.306,
        SCORE_TOWN: 265.377,
        SCORE_WIN_CONDITION: 5611.61,
        STRATEGY_BASE_UPGRADE_BONUS: 18.876,
        STRATEGY_EARLY_EXPANSION_BONUS: 11.139,
        STRATEGY_EARLY_FARM_BONUS: 47.446,
        STRATEGY_EARLY_TURN_LIMIT: 5.64,
        STRATEGY_ENDGAME_ATTACK_BONUS: 84.638,
        STRATEGY_ENDGAME_TURN: 9.263,
        STRATEGY_WALL_PRIORITY_BONUS: 51.939,
    }
};

export const RandomAiProfiles: AIProfile[] = [
    EvolvedProfile1,
    EvolvedProfile2,
    EvolvedProfile3,
    EvolvedProfile4
];

export const DefaultAIProfile: AIProfile = EvolvedProfile1;

export const mergeAIWeights = (overrides?: Partial<AIWeights>): AIWeights => {
    return {
        ...DefaultAIWeights,
        ...(overrides || {})
    };
};
